digraph {
  compound=true

  off[style="filled",color="lightgrey"]
  off -> "on (stored brightness)"[label="1 click"];
  off -> "on (stored brightness)"[label="hold until increases to desired brightness\nremember brightness"];
  off -> "on (turbo)"[label="2 clicks"];
  off -> "on (stored brightness)"[label="1 click + click and hold until decreases to desired brightness\nremember brightness"];
  off -> locked[label="4 clicks"];

  label="Utility Modes"
  off -> "battery check"[label="3 clicks",lhead="cluster_utility"];
  "temperature check" -> off[label="1 click",ltail="cluster_utility"]
  subgraph cluster_utility {
    "battery check" -> "sunset"[label="2 clicks"]
    sunset -> beacon[label="2 clicks"]
    beacon -> "temperature check"[label="2 clicks"]
    "temperature check" -> "battery check"[label="2 clicks"]
  }

  label="Strobe Modes"
  off -> candle[label="2 clicks + click and hold\nremembers last",lhead="cluster_strobe"];
  lightning -> off[label="1 click",ltail="cluster_strobe"];
  subgraph cluster_strobe {
    candle -> bike[label="2 clicks"]
    bike -> party[label="2 clicks"]
    party -> tactical[label="2 clicks"]
    tactical -> lightning[label="2 clicks"]
    lightning -> "candle"[label="2 clicks"]
  }

  locked[style="filled",color="lightgrey"]
  locked -> off[label="4 clicks"];
  locked -> "on (moonlight)"[label="hold"];

  "on (moonlight)" -> "locked"[label="release"];
  "on (stored brightness)" -> off[label="1 click"];
  "on (stored brightness)" -> "on (turbo)"[label="2 clicks"];
  "on (turbo)" -> off[label="1 click"];

  label="Anduril Flashlight UI"
  labelloc=t
}
